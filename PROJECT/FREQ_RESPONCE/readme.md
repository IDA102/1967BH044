***Программы для оцифровки,записи и обработки данных АЦП для построения АЧХ точечным методом***

# Описание взаимодействия DSP и MatLab
Написана программа для DSP процессора, которая инициализирует АЦП,DMA и COM порт. 
Написаны скрипты в MatLab  для обработки оцифрованных данных и построения АЧХ точечным методом, установки частоты генератора,
обработчик прерывания COM порта,инициации работы.
Логика работы заключается в установке на генераторе начальной частоты полосы частот и отправке по COM от MatLab в DSP команды начала работы.
В свою очередь DSP получив команду начала работы начаниает считывать АЦП отсчёты, и пересылать их через DMA в внутренний буфер.
После завершения транзакции пересылки DMA, DSP записывает данные буфера в файл на ПК.
Закончив записывать данные в файл, DSP отправляет прерывание по  COM в MatLab о готовности продолжить работать.
MatLab получив прирывание о готовности, выставляет новую частоту в генераторе, и отправляет прерывание  DSP с командой записи новой
порции данных. Так продолжается до тех пор, пока не будет снята вся полоса частот.

# Входные данные
- Начальная частота полосы частот = 5е6МГц
- Конечная частота полосы частот = 200е6МГц
- Шаг = 5МГц
- Количество шагов = 40

# Состав стенда
1. [+]Генератор ASG N5173B
2. [+]Отладочная плата 9018ВК016
3. [+]ПК с matlab и средствами разработки CM-LYNX, LAN

# План
1. [+]Собираем стенд
2. [+]Пишем scpi.m скрипты
   - FREQ_RESPONCE:Устанавливает начальную частоту генератора, инициализирует COM, отправляет прерывание DMA.
   - INTERRUPT:Обработчик прерываний.Получает прерывание.Устанавливает новую частоту генератора. Отправляет прерывание. 
   - VK_GENERATION_ASG_N5173B_FUNCTION_FREQ_RESPONCE:Устанавливает частоту генератора.
   - FILE_READ_RE :Обработка данных АЦП.Построение АЧХ.
3. [+]Пишем прогу записи raw data в фаил.
   - Инициализируем DMA,ADC,COM
   - Получаем прерывание
   - записываем данные из АЦП
   - записываем данные в фаил
   - оправляем прерывание в MatLab
   - и по кругу
4. [+]Подгружаем в матлаб и обрабатываем

# Отчётность
1. Бинарный файл с ветором массивов значений от 5 до 200 МГц с шагом 5 МГц.
2. График входного вектора,график модуля вектора,график АЧХ.
![local](https://github.com/IDA102/1967BH044/blob/master/FREQ_RESPONCE/FR_log_y.jpg)
3. Результаты 

## Вопросы и замечания


## FIX_1
1. [+] График отнормировать к амплитуде генератора
2. [+] Построен в диапазоне от 0 до 1.1
3. [+] Построен в log масштабе
